'use strict';(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],f):f(CodeMirror)})(function(f){var n=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,x=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,y=/[*+-]\s/;f.commands.newlineAndIndentContinueMarkdownList=function(b){if(b.getOption("disableInput"))return f.Pass;for(var q=b.listSelections(),r=[],h=0;h<q.length;h++){var c=
q[h].head,a=b.getStateAfter(c.line);a=f.innerMode(b.getMode(),a);if("markdown"!==a.mode.name){b.execCommand("newlineAndIndent");return}a=a.state;var d=!1!==a.list,g=0!==a.quote,e=b.getLine(c.line);a=n.exec(e);var l=/^\s*$/.test(e.slice(0,c.ch));if(!q[h].empty()||!d&&!g||!a||l){b.execCommand("newlineAndIndent");return}if(x.test(e))a=g&&/>\s*$/.test(e),d=!/>\s*$/.test(e),(a||d)&&b.replaceRange("",{line:c.line,ch:0},{line:c.line,ch:c.ch+1}),r[h]="\n";else if(d=a[1],e=a[5],a=(g=!(y.test(a[2])||0<=a[2].indexOf(">")))?
parseInt(a[3],10)+1+a[4]:a[2].replace("x"," "),r[h]="\n"+d+a+e,g)a:{a=b;c=c.line;e=d=0;g=n.exec(a.getLine(c));l=g[1];do{d+=1;var t=c+d,u=a.getLine(t),k=n.exec(u);if(k){var p=k[1],v=parseInt(g[3],10)+d-e,m=parseInt(k[3],10),w=m;if(l!==p||isNaN(m)){if(l.length>p.length)break a;if(l.length<p.length&&1===d)break a;e+=1}else v===m&&(w=m+1),v>m&&(w=v+1),a.replaceRange(u.replace(n,p+w+k[4]+k[5]),{line:t,ch:0},{line:t,ch:u.length})}}while(k)}}b.replaceSelections(r)}});
